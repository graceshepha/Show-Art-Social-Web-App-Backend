<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/errors/basecustomerror.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/errors/basecustomerror.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// @ts-check
/**
 * @typedef {Object} ErrObject
 * @property {string} ErrObject.type
 * @property {string} ErrObject.message
 * @property {number} ErrObject.status
 */

/**
 * @ignore
 * Fonction pour créer les erreurs avec un certain format.
 *
 * @param {string} t - Type of the error
 * @param {string} m - Message of the error
 * @param {number} s - Status code to return
 * @returns {ErrObject} Object of the error
 */
function createError(t, m, s) {
  return {
    type: t,
    message: m,
    status: s,
  };
}

/**
 * @ignore
 * Map qui lie les codes d'erreur ces valeurs
 *
 * @type {Object&lt;number, ErrObject>}
 * @author Roger Montero
 */
const errCodes = {
  /** @readonly UnknownError */
  1: createError('Unknown', 'Unknown error occured in the database', 500),
  /** @readonly NotConnectedError */
  2: createError('NotConnected', 'Database is not connected', 500),
  /** @readonly DuplicatedUniqueKeyError */
  3: createError('DuplicatedUnique', 'There cannot be two documents with the same unique value', 400),
  /** @readonly EntityNotFound */
  4: createError('KeyInvalidFormat', 'Cast to type required failed for value given', 400),
  /** @readonly EntityNotFound */
  5: createError('EntityNotFound', "The object with that criteria doesn't exist in our database", 404),
};

/**
 * Classe personalisée pour certains erreurs de notre application.
 *
 * @extends Error
 * @author Roger Montero
 */
class CustomError extends Error {
  /** @type {string} */
  name = 'CustomError';

  /** @type {Date} */
  date;

  /** @type {string} */
  message;

  /** @type {number} */
  code;

  /** @type {ErrObject} */
  error;

  /**
   * @constructor
   * @param {number} [code=1] Error code
   */
  constructor(code = 1, ...params) {
    // Pass remaining arguments (including vendor specific ones) to parent constructor
    super(...params);

    // Maintains proper stack trace for where our error was thrown (only available on V8)
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, CustomError);
    }
    // Get values with params
    const error = errCodes[code] ? errCodes[code] : errCodes[1];
    const msg = !params[0] ? error.message : params[0];

    this.date = new Date();
    this.message = msg;
    this.code = code;
    this.statusCode = error.status;
    this.error = {
      ...error,
      message: msg,
      status: undefined,
    };
  }
}

module.exports = CustomError;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CustomError.html">CustomError</a></li><li><a href="DatabaseClient.html">DatabaseClient</a></li><li><a href="PostRepository.html">PostRepository</a></li><li><a href="UserRepository.html">UserRepository</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DuplicatedUnique">DuplicatedUnique</a></li><li><a href="global.html#EntityNotFound">EntityNotFound</a></li><li><a href="global.html#InvalidKey">InvalidKey</a></li><li><a href="global.html#NotConnected">NotConnected</a></li><li><a href="global.html#postSchema">postSchema</a></li><li><a href="global.html#storage">storage</a></li><li><a href="global.html#tagSchema">tagSchema</a></li><li><a href="global.html#UnknownError">UnknownError</a></li><li><a href="global.html#upload">upload</a></li><li><a href="global.html#userSchema">userSchema</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Wed Mar 02 2022 19:49:19 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
